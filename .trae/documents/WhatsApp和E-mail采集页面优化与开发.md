## 1. WhatsApp号码采集页面优化 - 数据持久化

### 实现方案
- **存储机制**：使用浏览器localStorage实现数据持久化
- **存储内容**：
  - 采集配置：所选地区、关键词、来源、页数、延迟
  - 采集任务状态：任务ID、状态、进度、统计信息
  - 采集结果：已采集的号码数据
  - 页面状态：当前页码、每页条数

### 核心实现逻辑
1. **数据保存**：
   - 在`useEffect`中监听状态变化，实时保存到localStorage
   - 关键状态变化时触发保存（配置修改、任务状态更新、结果获取）

2. **数据恢复**：
   - 页面初始化时从localStorage加载数据
   - 组件挂载时恢复之前的状态

3. **数据清理**：
   - 提供手动清理数据的选项
   - 任务停止时自动清理过期数据

### 修改文件
- `frontend/src/pages/WhatsAppNumberCollection.tsx`：添加本地存储逻辑

## 2. 新E-mail采集页面开发

### 功能需求
1. **关键词输入与提交**：多行关键词输入框
2. **E-mail格式验证**：正则表达式验证
3. **国内邮箱过滤**：
   - 国内域名列表：qq.com, 163.com, 126.com, sina.com, sohu.com, 139.com, yeah.net, tom.com, 263.net, 189.cn等
   - 过滤规则：检查邮箱域名，国内域名自动过滤
4. **数据持久化**：与WhatsApp页面相同的本地存储机制
5. **一致的设计风格**：复用WhatsApp页面的布局和样式

### 实现方案

#### 前端实现
1. **页面结构**：
   - 复用WhatsApp页面的Tabs结构
   - 包含采集配置、采集状态、采集结果三个主要部分
   - 设计与WhatsApp页面一致的UI组件

2. **核心功能**：
   - E-mail格式验证：`/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/`
   - 国内邮箱过滤：检查域名是否在国内域名列表中
   - 数据持久化：使用与WhatsApp页面相同的localStorage方案

3. **数据模型**：
   - 复用或扩展现有types定义
   - 添加E-mail特定字段

#### 后端实现
1. **控制器**：参考`whatsapp-collection.ts`创建`email-collection.ts`
2. **API端点**：
   - 获取预设网站列表
   - 获取支持的地区列表
   - 开始/暂停/继续/停止采集
   - 获取采集状态和结果
   - 导出结果
3. **E-mail处理**：
   - 格式验证
   - 国内邮箱过滤
   - 模拟采集过程

### 开发文件
- `frontend/src/pages/EmailCollection.tsx`：新E-mail采集页面
- `backend/src/controllers/email-collection.ts`：E-mail采集控制器
- `backend/src/models/CollectionTask.ts`：复用现有模型（或扩展）
- `backend/src/routes/email-collection.ts`：E-mail采集路由
- `frontend/src/services/email.ts`：添加E-mail采集相关服务

## 3. 共同优化点

### 数据安全
- 本地存储加密：敏感数据加密后存储
- 定期清理：自动清理过期数据
- 用户控制：提供手动清理选项

### 用户体验
- 清晰的加载状态和错误提示
- 响应式设计，适配不同设备
- 一致的交互逻辑
- 提供使用说明

### 性能优化
- 分批加载大量数据
- 优化本地存储读写操作
- 合理设置缓存策略

## 4. 实施步骤

1. **优化WhatsApp页面**：
   - 添加本地存储逻辑
   - 测试数据持久化功能

2. **开发后端E-mail采集API**：
   - 创建控制器和路由
   - 实现核心功能
   - 测试API端点

3. **开发前端E-mail采集页面**：
   - 创建页面组件
   - 实现UI和交互
   - 集成API
   - 添加数据持久化

4. **测试与优化**：
   - 功能测试
   - 兼容性测试
   - 性能测试
   - 用户体验优化

通过以上方案，将实现WhatsApp和E-mail两个采集页面的优化和开发，确保页面跳转后数据持久化，同时保持一致的用户体验和视觉风格。