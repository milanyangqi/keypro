<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美国各州首府及主要城市时区与外贸短信发送时间</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .time-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .time-box {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px 20px;
            border-radius: 8px;
            min-width: 180px;
        }
        
        .time-label {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .time-value {
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            padding: 15px 20px;
            background: #f0f4f8;
            border-bottom: 1px solid #e1e8ed;
            flex-wrap: wrap;
        }
        
        .search-box {
            display: flex;
            align-items: center;
        }
        
        .search-box input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 10px;
            width: 200px;
        }
        
        .timezone-filter {
            display: flex;
            align-items: center;
        }
        
        .timezone-filter select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-left: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background-color: #2a5298;
            color: white;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            position: relative;
        }
        
        th:hover {
            background-color: #1e3c72;
        }
        
        th:after {
            content: '↕';
            position: absolute;
            right: 10px;
            opacity: 0.7;
        }
        
        td {
            padding: 15px;
            border-bottom: 1px solid #e1e8ed;
        }
        
        tr:nth-child(even) {
            background-color: #f9fbfd;
        }
        
        tr:hover {
            background-color: #f0f7ff;
        }
        
        .time-diff {
            font-weight: bold;
        }
        
        .time-diff.positive {
            color: #e74c3c;
        }
        
        .time-diff.negative {
            color: #27ae60;
        }
        
        .best-time {
            background-color: #2ecc71;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
        }
        
        .local-time {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .population {
            font-weight: 500;
        }
        
        .state-name {
            font-weight: 600;
        }
        
        .english-name {
            font-size: 0.85rem;
            color: #666;
            display: block;
            margin-top: 3px;
        }
        
        .city-type {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
            display: inline-block;
            margin-top: 5px;
        }
        
        .city-type.capital {
            background-color: #3498db;
            color: white;
        }
        
        .city-type.major {
            background-color: #9b59b6;
            color: white;
        }
        
        .timezone-EST {
            border-left: 4px solid #3498db;
        }
        
        .timezone-CST {
            border-left: 4px solid #9b59b6;
        }
        
        .timezone-MST {
            border-left: 4px solid #e67e22;
        }
        
        .timezone-PST {
            border-left: 4px solid #e74c3c;
        }
        
        .timezone-AKST {
            border-left: 4px solid #1abc9c;
        }
        
        .timezone-HST {
            border-left: 4px solid #f1c40f;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: #f0f4f8;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                gap: 10px;
            }
            
            th, td {
                padding: 10px 5px;
                font-size: 0.9rem;
            }
            
            .search-box input {
                width: 100%;
            }
            
            .time-display {
                flex-direction: column;
                gap: 10px;
                align-items: center;
            }
            
            .time-box {
                min-width: 150px;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>美国各州首府及主要城市时区与外贸短信发送时间</h1>
            <p class="subtitle">了解美国各城市时区、人口、与北京时间的时差及最佳外贸沟通时间</p>
            <div class="time-display">
                <div class="time-box">
                    <div class="time-label">北京时间</div>
                    <div class="time-value" id="beijingTime">--:--:--</div>
                </div>
                <div class="time-box">
                    <div class="time-label">东部时间 (EST)</div>
                    <div class="time-value" id="easternTime">--:--:--</div>
                </div>
                <div class="time-box">
                    <div class="time-label">中部时间 (CST)</div>
                    <div class="time-value" id="centralTime">--:--:--</div>
                </div>
                <div class="time-box">
                    <div class="time-label">山地时间 (MST)</div>
                    <div class="time-value" id="mountainTime">--:--:--</div>
                </div>
                <div class="time-box">
                    <div class="time-label">太平洋时间 (PST)</div>
                    <div class="time-value" id="pacificTime">--:--:--</div>
                </div>
                <div class="time-box">
                    <div class="time-label">阿拉斯加时间 (AKST)</div>
                    <div class="time-value" id="alaskaTime">--:--:--</div>
                </div>
                <div class="time-box">
                    <div class="time-label">夏威夷时间 (HST)</div>
                    <div class="time-value" id="hawaiiTime">--:--:--</div>
                </div>
            </div>
        </header>
        
        <div class="controls">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="搜索州名或城市...">
            </div>
            <div class="timezone-filter">
                <label for="timezoneFilter">按时区筛选：</label>
                <select id="timezoneFilter">
                    <option value="all">所有时区</option>
                    <option value="EST">东部时间 (EST)</option>
                    <option value="CST">中部时间 (CST)</option>
                    <option value="MST">山地时间 (MST)</option>
                    <option value="PST">太平洋时间 (PST)</option>
                    <option value="AKST">阿拉斯加时间 (AKST)</option>
                    <option value="HST">夏威夷时间 (HST)</option>
                </select>
            </div>
        </div>
        
        <table id="citiesTable">
            <thead>
                <tr>
                    <th data-sort="state">州名</th>
                    <th data-sort="city">城市</th>
                    <th data-sort="type">城市类型</th>
                    <th data-sort="population">人口数量</th>
                    <th data-sort="timezone">时区</th>
                    <th data-sort="localTime">当地时间</th>
                    <th data-sort="timeDiff">与北京时间时差</th>
                    <th data-sort="bestTime">最佳发送时间 (北京时间)</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- 表格内容将通过JavaScript动态生成 -->
            </tbody>
        </table>
        
        <footer>
            <p>注：最佳发送时间基于当地工作时间（上午9点-下午5点）计算，转换为北京时间；人口数据为城市或州总人口估计值</p>
            <p>© 2023 外贸开发助手</p>
        </footer>
    </div>

    <script>
        // 美国各州首府及主要城市数据
        const citiesData = [
            // 州首府
            {
                state: "阿拉巴马州",
                state_en: "Alabama",
                city: "蒙哥马利",
                city_en: "Montgomery",
                type: "州首府",
                population: 5024279,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "阿拉斯加州",
                state_en: "Alaska",
                city: "朱诺",
                city_en: "Juneau",
                type: "州首府",
                population: 733391,
                timezone: "AKST",
                timeDiff: -17,
                bestTime: "02:00-10:00"
            },
            {
                state: "亚利桑那州",
                state_en: "Arizona",
                city: "菲尼克斯",
                city_en: "Phoenix",
                type: "州首府",
                population: 7151502,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "阿肯色州",
                state_en: "Arkansas",
                city: "小石城",
                city_en: "Little Rock",
                type: "州首府",
                population: 3011524,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "加利福尼亚州",
                state_en: "California",
                city: "萨克拉门托",
                city_en: "Sacramento",
                type: "州首府",
                population: 39538223,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "科罗拉多州",
                state_en: "Colorado",
                city: "丹佛",
                city_en: "Denver",
                type: "州首府",
                population: 5773714,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "康涅狄格州",
                state_en: "Connecticut",
                city: "哈特福德",
                city_en: "Hartford",
                type: "州首府",
                population: 3605944,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "特拉华州",
                state_en: "Delaware",
                city: "多佛",
                city_en: "Dover",
                type: "州首府",
                population: 989948,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "佛罗里达州",
                state_en: "Florida",
                city: "塔拉哈西",
                city_en: "Tallahassee",
                type: "州首府",
                population: 21538187,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "佐治亚州",
                state_en: "Georgia",
                city: "亚特兰大",
                city_en: "Atlanta",
                type: "州首府",
                population: 10711908,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "夏威夷州",
                state_en: "Hawaii",
                city: "火奴鲁鲁",
                city_en: "Honolulu",
                type: "州首府",
                population: 1455271,
                timezone: "HST",
                timeDiff: -18,
                bestTime: "03:00-11:00"
            },
            {
                state: "爱达荷州",
                state_en: "Idaho",
                city: "博伊西",
                city_en: "Boise",
                type: "州首府",
                population: 1839106,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "伊利诺伊州",
                state_en: "Illinois",
                city: "斯普林菲尔德",
                city_en: "Springfield",
                type: "州首府",
                population: 12812508,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "印第安纳州",
                state_en: "Indiana",
                city: "印第安纳波利斯",
                city_en: "Indianapolis",
                type: "州首府",
                population: 6785528,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "爱荷华州",
                state_en: "Iowa",
                city: "得梅因",
                city_en: "Des Moines",
                type: "州首府",
                population: 3190369,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "堪萨斯州",
                state_en: "Kansas",
                city: "托皮卡",
                city_en: "Topeka",
                type: "州首府",
                population: 2937880,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "肯塔基州",
                state_en: "Kentucky",
                city: "法兰克福",
                city_en: "Frankfort",
                type: "州首府",
                population: 4505836,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "路易斯安那州",
                state_en: "Louisiana",
                city: "巴吞鲁日",
                city_en: "Baton Rouge",
                type: "州首府",
                population: 4657757,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "缅因州",
                state_en: "Maine",
                city: "奥古斯塔",
                city_en: "Augusta",
                type: "州首府",
                population: 1362359,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "马里兰州",
                state_en: "Maryland",
                city: "安纳波利斯",
                city_en: "Annapolis",
                type: "州首府",
                population: 6177224,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "马萨诸塞州",
                state_en: "Massachusetts",
                city: "波士顿",
                city_en: "Boston",
                type: "州首府",
                population: 7029917,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "密歇根州",
                state_en: "Michigan",
                city: "兰辛",
                city_en: "Lansing",
                type: "州首府",
                population: 10077331,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "明尼苏达州",
                state_en: "Minnesota",
                city: "圣保罗",
                city_en: "St. Paul",
                type: "州首府",
                population: 5706494,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "密西西比州",
                state_en: "Mississippi",
                city: "杰克逊",
                city_en: "Jackson",
                type: "州首府",
                population: 2961279,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "密苏里州",
                state_en: "Missouri",
                city: "杰斐逊城",
                city_en: "Jefferson City",
                type: "州首府",
                population: 6154913,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "蒙大拿州",
                state_en: "Montana",
                city: "海伦娜",
                city_en: "Helena",
                type: "州首府",
                population: 1084225,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "内布拉斯加州",
                state_en: "Nebraska",
                city: "林肯",
                city_en: "Lincoln",
                type: "州首府",
                population: 1961504,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "内华达州",
                state_en: "Nevada",
                city: "卡森城",
                city_en: "Carson City",
                type: "州首府",
                population: 3104614,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "新罕布什尔州",
                state_en: "New Hampshire",
                city: "康科德",
                city_en: "Concord",
                type: "州首府",
                population: 1377529,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "新泽西州",
                state_en: "New Jersey",
                city: "特伦顿",
                city_en: "Trenton",
                type: "州首府",
                population: 9288994,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "新墨西哥州",
                state_en: "New Mexico",
                city: "圣菲",
                city_en: "Santa Fe",
                type: "州首府",
                population: 2117522,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "纽约州",
                state_en: "New York",
                city: "奥尔巴尼",
                city_en: "Albany",
                type: "州首府",
                population: 20201249,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "北卡罗来纳州",
                state_en: "North Carolina",
                city: "罗利",
                city_en: "Raleigh",
                type: "州首府",
                population: 10439388,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "北达科他州",
                state_en: "North Dakota",
                city: "俾斯麦",
                city_en: "Bismarck",
                type: "州首府",
                population: 779094,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "俄亥俄州",
                state_en: "Ohio",
                city: "哥伦布",
                city_en: "Columbus",
                type: "州首府",
                population: 11799448,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "俄克拉荷马州",
                state_en: "Oklahoma",
                city: "俄克拉荷马城",
                city_en: "Oklahoma City",
                type: "州首府",
                population: 3959353,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "俄勒冈州",
                state_en: "Oregon",
                city: "塞勒姆",
                city_en: "Salem",
                type: "州首府",
                population: 4237256,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "宾夕法尼亚州",
                state_en: "Pennsylvania",
                city: "哈里斯堡",
                city_en: "Harrisburg",
                type: "州首府",
                population: 13002700,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "罗得岛州",
                state_en: "Rhode Island",
                city: "普罗维登斯",
                city_en: "Providence",
                type: "州首府",
                population: 1097379,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "南卡罗来纳州",
                state_en: "South Carolina",
                city: "哥伦比亚",
                city_en: "Columbia",
                type: "州首府",
                population: 5118425,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "南达科他州",
                state_en: "South Dakota",
                city: "皮尔",
                city_en: "Pierre",
                type: "州首府",
                population: 886667,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "田纳西州",
                state_en: "Tennessee",
                city: "纳什维尔",
                city_en: "Nashville",
                type: "州首府",
                population: 6910840,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "德克萨斯州",
                state_en: "Texas",
                city: "奥斯汀",
                city_en: "Austin",
                type: "州首府",
                population: 29145505,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "犹他州",
                state_en: "Utah",
                city: "盐湖城",
                city_en: "Salt Lake City",
                type: "州首府",
                population: 3271616,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "佛蒙特州",
                state_en: "Vermont",
                city: "蒙彼利埃",
                city_en: "Montpelier",
                type: "州首府",
                population: 643077,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "弗吉尼亚州",
                state_en: "Virginia",
                city: "里士满",
                city_en: "Richmond",
                type: "州首府",
                population: 8631393,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "华盛顿州",
                state_en: "Washington",
                city: "奥林匹亚",
                city_en: "Olympia",
                type: "州首府",
                population: 7705281,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "西弗吉尼亚州",
                state_en: "West Virginia",
                city: "查尔斯顿",
                city_en: "Charleston",
                type: "州首府",
                population: 1793716,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "威斯康星州",
                state_en: "Wisconsin",
                city: "麦迪逊",
                city_en: "Madison",
                type: "州首府",
                population: 5893718,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "怀俄明州",
                state_en: "Wyoming",
                city: "夏延",
                city_en: "Cheyenne",
                type: "州首府",
                population: 576851,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "华盛顿特区",
                state_en: "Washington D.C.",
                city: "华盛顿",
                city_en: "Washington",
                type: "州首府",
                population: 689545,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            
            // 美国其他主要大城市
            {
                state: "纽约州",
                state_en: "New York",
                city: "纽约",
                city_en: "New York City",
                type: "主要城市",
                population: 8804190,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "加利福尼亚州",
                state_en: "California",
                city: "洛杉矶",
                city_en: "Los Angeles",
                type: "主要城市",
                population: 3898747,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "伊利诺伊州",
                state_en: "Illinois",
                city: "芝加哥",
                city_en: "Chicago",
                type: "主要城市",
                population: 2746388,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "德克萨斯州",
                state_en: "Texas",
                city: "休斯顿",
                city_en: "Houston",
                type: "主要城市",
                population: 2304580,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "亚利桑那州",
                state_en: "Arizona",
                city: "凤凰城",
                city_en: "Phoenix",
                type: "主要城市",
                population: 1608139,
                timezone: "MST",
                timeDiff: -15,
                bestTime: "00:00-08:00"
            },
            {
                state: "宾夕法尼亚州",
                state_en: "Pennsylvania",
                city: "费城",
                city_en: "Philadelphia",
                type: "主要城市",
                population: 1603797,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "德克萨斯州",
                state_en: "Texas",
                city: "圣安东尼奥",
                city_en: "San Antonio",
                type: "主要城市",
                population: 1434625,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "加利福尼亚州",
                state_en: "California",
                city: "圣地亚哥",
                city_en: "San Diego",
                type: "主要城市",
                population: 1386932,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "德克萨斯州",
                state_en: "Texas",
                city: "达拉斯",
                city_en: "Dallas",
                type: "主要城市",
                population: 1304379,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "加利福尼亚州",
                state_en: "California",
                city: "圣何塞",
                city_en: "San Jose",
                type: "主要城市",
                population: 1013240,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "加利福尼亚州",
                state_en: "California",
                city: "旧金山",
                city_en: "San Francisco",
                type: "主要城市",
                population: 873965,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "华盛顿州",
                state_en: "Washington",
                city: "西雅图",
                city_en: "Seattle",
                type: "主要城市",
                population: 737015,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "内华达州",
                state_en: "Nevada",
                city: "拉斯维加斯",
                city_en: "Las Vegas",
                type: "主要城市",
                population: 641903,
                timezone: "PST",
                timeDiff: -16,
                bestTime: "01:00-09:00"
            },
            {
                state: "佛罗里达州",
                state_en: "Florida",
                city: "迈阿密",
                city_en: "Miami",
                type: "主要城市",
                population: 442241,
                timezone: "EST",
                timeDiff: -13,
                bestTime: "22:00-06:00"
            },
            {
                state: "密苏里州",
                state_en: "Missouri",
                city: "堪萨斯城",
                city_en: "Kansas City",
                type: "主要城市",
                population: 508394,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            },
            {
                state: "路易斯安那州",
                state_en: "Louisiana",
                city: "新奥尔良",
                city_en: "New Orleans",
                type: "主要城市",
                population: 383997,
                timezone: "CST",
                timeDiff: -14,
                bestTime: "23:00-07:00"
            }
        ];

        // 存储当前显示的数据
        let currentData = [...citiesData];

        // 渲染表格
        function renderTable(data) {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            // 存储当前数据用于排序
            currentData = [...data];
            
            data.forEach(city => {
                const row = document.createElement('tr');
                row.className = `timezone-${city.timezone}`;
                
                // 计算当地时间
                const localTime = calculateLocalTime(city.timeDiff);
                
                // 格式化人口数量（以万为单位）
                const populationFormatted = formatPopulation(city.population);
                
                // 时差显示格式
                let timeDiffText;
                if (city.timeDiff === 0) {
                    timeDiffText = "相同";
                } else if (city.timeDiff > 0) {
                    timeDiffText = `早${city.timeDiff}小时`;
                } else {
                    timeDiffText = `晚${Math.abs(city.timeDiff)}小时`;
                }
                
                // 城市类型标签
                const cityTypeClass = city.type === "州首府" ? "capital" : "major";
                const cityTypeText = city.type === "州首府" ? "州首府" : "主要城市";
                
                row.innerHTML = `
                    <td class="state-name">
                        ${city.state}
                        <span class="english-name">${city.state_en}</span>
                    </td>
                    <td class="state-name">
                        ${city.city}
                        <span class="english-name">${city.city_en}</span>
                        <div class="city-type ${cityTypeClass}">${cityTypeText}</div>
                    </td>
                    <td>${city.type}</td>
                    <td class="population">${populationFormatted}</td>
                    <td>${getTimezoneFullName(city.timezone)}</td>
                    <td class="local-time">${localTime}</td>
                    <td><span class="time-diff ${city.timeDiff > 0 ? 'positive' : (city.timeDiff < 0 ? 'negative' : '')}">${timeDiffText}</span></td>
                    <td><span class="best-time">${city.bestTime}</span></td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // 获取时区全名
        function getTimezoneFullName(abbr) {
            const timezoneMap = {
                'EST': '东部时间 (EST/EDT)',
                'CST': '中部时间 (CST/CDT)',
                'MST': '山地时间 (MST/MDT)',
                'PST': '太平洋时间 (PST/PDT)',
                'AKST': '阿拉斯加时间 (AKST/AKDT)',
                'HST': '夏威夷时间 (HST)'
            };
            return timezoneMap[abbr] || abbr;
        }

        // 格式化人口数量（以万为单位）
        function formatPopulation(population) {
            if (population >= 10000000) {
                return (population / 10000).toFixed(0) + ' 万';
            } else {
                return (population / 10000).toFixed(1) + ' 万';
            }
        }

        // 计算当地时间（修复版本）
        function calculateLocalTime(timeDiff) {
            // 获取当前UTC时间
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            
            // 正确计算当地时间：UTC时间加上时差
            // timeDiff是相对于北京时间的时差，所以需要从UTC+8转换
            const beijingOffset = 8; // 北京时间是UTC+8
            const localTime = new Date(utc + ((beijingOffset + timeDiff) * 3600000));
            
            return formatTime(localTime);
        }

        // 计算当地时间秒数（用于排序）
        function calculateLocalTimeInSeconds(timeDiff) {
            // 获取当前UTC时间
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            
            // 正确计算当地时间：UTC时间加上时差
            const beijingOffset = 8; // 北京时间是UTC+8
            const localTime = new Date(utc + ((beijingOffset + timeDiff) * 3600000));
            
            // 返回从午夜开始的秒数，用于排序
            return localTime.getHours() * 3600 + localTime.getMinutes() * 60 + localTime.getSeconds();
        }

        // 格式化时间
        function formatTime(date) {
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            const seconds = date.getSeconds().toString().padStart(2, '0');
            return `${hours}:${minutes}:${seconds}`;
        }

        // 更新北京时间显示
        function updateBeijingTime() {
            // 北京时间是UTC+8
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const beijingTime = new Date(utc + (8 * 3600000));
            const timeString = formatTime(beijingTime);
            document.getElementById('beijingTime').textContent = timeString;
        }

        // 更新美国东部时间显示
        function updateEasternTime() {
            // 东部时间是UTC-5
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const easternTime = new Date(utc + (-5 * 3600000));
            const timeString = formatTime(easternTime);
            document.getElementById('easternTime').textContent = timeString;
        }

        // 更新美国中部时间显示
        function updateCentralTime() {
            // 中部时间是UTC-6
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const centralTime = new Date(utc + (-6 * 3600000));
            const timeString = formatTime(centralTime);
            document.getElementById('centralTime').textContent = timeString;
        }

        // 更新美国山地时间显示
        function updateMountainTime() {
            // 山地时间是UTC-7
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const mountainTime = new Date(utc + (-7 * 3600000));
            const timeString = formatTime(mountainTime);
            document.getElementById('mountainTime').textContent = timeString;
        }

        // 更新美国太平洋时间显示
        function updatePacificTime() {
            // 太平洋时间是UTC-8
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const pacificTime = new Date(utc + (-8 * 3600000));
            const timeString = formatTime(pacificTime);
            document.getElementById('pacificTime').textContent = timeString;
        }

        // 更新美国阿拉斯加时间显示
        function updateAlaskaTime() {
            // 阿拉斯加时间是UTC-9
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const alaskaTime = new Date(utc + (-9 * 3600000));
            const timeString = formatTime(alaskaTime);
            document.getElementById('alaskaTime').textContent = timeString;
        }

        // 更新美国夏威夷时间显示
        function updateHawaiiTime() {
            // 夏威夷时间是UTC-10
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const hawaiiTime = new Date(utc + (-10 * 3600000));
            const timeString = formatTime(hawaiiTime);
            document.getElementById('hawaiiTime').textContent = timeString;
        }

        // 更新所有当地时间
        function updateAllLocalTimes() {
            const rows = document.querySelectorAll('#tableBody tr');
            rows.forEach(row => {
                const timeCell = row.querySelector('.local-time');
                if (timeCell) {
                    // 从行的数据中获取时差信息
                    const timeDiffText = row.querySelector('.time-diff').textContent;
                    let timeDiff = 0;
                    
                    if (timeDiffText.includes('早')) {
                        timeDiff = parseInt(timeDiffText.match(/\d+/)[0]) || 0;
                    } else if (timeDiffText.includes('晚')) {
                        timeDiff = -parseInt(timeDiffText.match(/\d+/)[0]) || 0;
                    } else if (timeDiffText === '相同') {
                        timeDiff = 0;
                    }
                    
                    const localTime = calculateLocalTime(timeDiff);
                    timeCell.textContent = localTime;
                }
            });
        }

        // 搜索功能
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filteredData = citiesData.filter(city => 
                city.state.toLowerCase().includes(searchTerm) || 
                city.state_en.toLowerCase().includes(searchTerm) ||
                city.city.toLowerCase().includes(searchTerm) ||
                city.city_en.toLowerCase().includes(searchTerm)
            );
            renderTable(filteredData);
        });

        // 时区筛选功能
        document.getElementById('timezoneFilter').addEventListener('change', function(e) {
            const timezone = e.target.value;
            if (timezone === 'all') {
                renderTable(citiesData);
            } else {
                const filteredData = citiesData.filter(city => city.timezone === timezone);
                renderTable(filteredData);
            }
        });

        // 表格排序功能
        document.querySelectorAll('th[data-sort]').forEach(header => {
            header.addEventListener('click', function() {
                const sortBy = this.getAttribute('data-sort');
                const isAsc = this.getAttribute('data-order') === 'asc';
                
                // 重置所有排序指示器
                document.querySelectorAll('th[data-sort]').forEach(th => {
                    th.removeAttribute('data-order');
                });
                
                // 设置当前排序方向
                this.setAttribute('data-order', isAsc ? 'desc' : 'asc');
                
                // 排序数据
                const sortedData = [...currentData].sort((a, b) => {
                    // 特殊处理当地时间排序
                    if (sortBy === 'localTime') {
                        const aTime = calculateLocalTimeInSeconds(a.timeDiff);
                        const bTime = calculateLocalTimeInSeconds(b.timeDiff);
                        return isAsc ? aTime - bTime : bTime - aTime;
                    }
                    
                    // 特殊处理时差和人口排序
                    if (sortBy === 'timeDiff' || sortBy === 'population') {
                        return isAsc ? a[sortBy] - b[sortBy] : b[sortBy] - a[sortBy];
                    }
                    
                    // 处理城市类型排序
                    if (sortBy === 'type') {
                        const typeOrder = { '州首府': 1, '主要城市': 2 };
                        const aValue = typeOrder[a.type] || 3;
                        const bValue = typeOrder[b.type] || 3;
                        return isAsc ? aValue - bValue : bValue - aValue;
                    }
                    
                    // 处理其他字段
                    let aValue, bValue;
                    
                    // 如果是州名或城市排序，使用英文名称进行排序
                    if (sortBy === 'state') {
                        aValue = a.state_en.toLowerCase();
                        bValue = b.state_en.toLowerCase();
                    } else if (sortBy === 'city') {
                        aValue = a.city_en.toLowerCase();
                        bValue = b.city_en.toLowerCase();
                    } else {
                        aValue = a[sortBy]?.toString().toLowerCase() || '';
                        bValue = b[sortBy]?.toString().toLowerCase() || '';
                    }
                    
                    if (aValue < bValue) return isAsc ? -1 : 1;
                    if (aValue > bValue) return isAsc ? 1 : -1;
                    return 0;
                });
                
                renderTable(sortedData);
            });
        });

        // 初始渲染
        renderTable(citiesData);
        updateBeijingTime();
        updateEasternTime();
        updateCentralTime();
        updateMountainTime();
        updatePacificTime();
        updateAlaskaTime();
        updateHawaiiTime();

        // 每秒更新时间
        setInterval(() => {
            updateBeijingTime();
            updateEasternTime();
            updateCentralTime();
            updateMountainTime();
            updatePacificTime();
            updateAlaskaTime();
            updateHawaiiTime();
            updateAllLocalTimes();
        }, 1000);
    </script>
</body>
</html>